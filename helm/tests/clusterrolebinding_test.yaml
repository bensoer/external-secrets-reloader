suite: clusterrolebinding
templates:
  - clusterrolebinding.yaml
tests:
  - it: should create a clusterrolebinding
    asserts:
      - isKind:
          of: ClusterRoleBinding
      - equal:
          path: metadata.name
          value: external-secret-reloader-binding
      - equal:
          path: roleRef.name
          value: external-secret-reloader-editor-role
      - equal:
          path: subjects[0].name
          value: RELEASE-NAME-external-secrets-reloader
      - equal:
          path: subjects[0].namespace
          value: NAMESPACE

  - it: should use a custom service account name
    set:
      serviceAccount:
        name: my-sa
    asserts:
      - equal:
          path: subjects[0].name
          value: my-sa
